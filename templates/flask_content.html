<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flask Content</title>
    <style>
        body { font-family: Roboto, sans-serif; background-color: #1e2026; color: #eaecef; margin: 0; padding: 0; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        h2 { color: #f0b90b; }
        .section { margin: 20px 0; padding: 20px; background-color: #2a2d37; border-radius: 8px; }
        .balance-item, .position-item { padding: 10px; border-bottom: 1px solid #444; }
        .position-item:last-child { border-bottom: none; }
    </style>
</head>
<body>
    <div class="container">
        <div class="section balance">
            <h2>Total Futures Balance</h2>
            <p>{{ "%.2f"|format(futures_total) }} USDT</p>
            <p>Last update: {{ last_update }}</p>
        </div>

        <div class="section pnl">
            <h2>Total PnL</h2>
            <div>
                <p>Unrealized PnL: {{ "%.2f"|format(total_unrealized_pnl) }} USDT ({{ "%.2f"|format(pnl_percentage) }}%)</p>
            </div>
        </div>

        <div class="section futures-balances">
            <h2>Futures Balances</h2>
            {% for balance in futures_balances %}
            <div class="balance-item">
                <p>{{ balance.asset }}: {{ "%.6f"|format(balance.balance) }}
                    {% if balance.available is defined %}
                    (Available: {{ "%.6f"|format(balance.available) }})
                    {% endif %}
                </p>
            </div>
            {% endfor %}
            <p>Total Futures Balance: {{ "%.6f"|format(futures_total) }} USDT</p>
        </div>

        <div class="section positions">
            <h2>Open Positions</h2>
            {% for pos in futures_positions %}
            <div class="position-item">
                <h3>{{ pos.symbol }} ({{ pos.positionSide }})</h3>
                <p>Size: {{ "%.2f"|format(pos.usdtValue) }} USDT | Leverage: {{ pos.leverage }}x</p>
                <p>Contracts: {{ pos.positionAmt|abs }} </p>
                <p>Entry: {{ "%.4f"|format(pos.entryPrice) }} | Mark: {{ "%.4f"|format(pos.markPrice) }}</p>
                <p>PNL: {{ "%.2f"|format(pos.unRealizedProfit) }} ({{ "%.2f"|format(pos.roe) }}%)</p>
            </div>
            {% else %}
            <p>No open positions</p>
            {% endfor %}
        </div>
    </div>
</body>
</html>